<!DOCTYPE html>
<html lang="ko">
    <head>
        <meta charset="UTF-8" />
        <title>진료 통계</title>
        <script src="https://cdn.tailwindcss.com"></script>
        <script
            src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/js/all.min.js"
            crossorigin="anonymous"
            referrerpolicy="no-referrer"
        ></script>
        <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
        <link rel="preconnect" href="https://fonts.googleapis.com" />
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
        <link
            rel="stylesheet"
            href="https://fonts.googleapis.com/css2?family=Inter:wght@100;200;300;400;500;600;700;800;900&display=swap"
        />
        <style>
            * {
                font-family: "Inter", sans-serif;
            }
            ::-webkit-scrollbar {
                display: none;
            }
            html,
            body {
                -ms-overflow-style: none;
                scrollbar-width: none;
            }
            .submenu {
                max-height: 0;
                overflow: hidden;
                transition: max-height 0.3s ease-in-out;
            }
            .submenu.active {
                max-height: 500px;
            }
            .arrow {
                transition: transform 0.3s ease-in-out;
            }
            .arrow.rotated {
                transform: rotate(90deg);
            }
        </style>
    </head>
    <body class="h-full text-base-content bg-neutral-50">
        <header id="header" class="bg-white border-b border-neutral-200 px-6 py-4">
            <div class="flex items-center justify-between">
                <div class="flex items-center space-x-4">
                    <i class="fa-solid fa-hospital text-2xl text-neutral-700"></i>
                    <h1 class="text-xl text-neutral-900">병원 관리 시스템</h1>
                </div>
                <div class="flex items-center space-x-4">
                    <div class="flex items-center space-x-2">
                        <img
                            src="https://api.dicebear.com/7.x/notionists/svg?scale=200&seed=789"
                            alt="User Avatar"
                            class="w-8 h-8 rounded-full"
                        />
                        <span class="text-sm text-neutral-700">김의사</span>
                    </div>
                    <button class="px-3 py-1 text-sm text-neutral-600 hover:text-neutral-900">
                        <i class="fa-solid fa-sign-out-alt"></i>
                    </button>
                </div>
            </div>
        </header>
        <main class="h-full flex">
            <aside id="sidebar" class="w-64 bg-neutral-50 border-r border-neutral-200 p-6">
                <nav class="space-y-2">
                    <!-- 일정 관리 -->
                    <div class="menu-item">
                        <span
                            onclick="toggleSubmenu('schedule-submenu')"
                            class="flex items-center justify-between px-3 py-2 text-neutral-700 hover:bg-neutral-200 rounded-md cursor-pointer"
                        >
                            <div class="flex items-center space-x-3">
                                <i class="fa-solid fa-calendar-days"></i>
                                <span>일정 관리</span>
                            </div>
                            <i class="fa-solid fa-chevron-right arrow text-sm" id="schedule-arrow"></i>
                        </span>
                        <div id="schedule-submenu" class="submenu ml-6 mt-1 space-y-1">
                            <a
                                href="main.html"
                                class="flex items-center space-x-3 px-3 py-2 text-neutral-600 hover:bg-neutral-100 rounded-md text-sm cursor-pointer"
                            >
                                <i class="fa-solid fa-clock"></i>
                                <span>월별 일정</span>
                            </a>
                            <a
                                href="weeklySchedule.html"
                                class="flex items-center space-x-3 px-3 py-2 text-neutral-600 hover:bg-neutral-100 rounded-md text-sm cursor-pointer"
                            >
                                <i class="fa-solid fa-calendar-week"></i>
                                <span>주간 일정</span>
                            </a>
                            <a
                                href="appointmentManage.html"
                                class="flex items-center space-x-3 px-3 py-2 text-neutral-600 hover:bg-neutral-100 rounded-md text-sm cursor-pointer"
                            >
                                <i class="fa-solid fa-user-clock"></i>
                                <span>예약 관리</span>
                            </a>
                        </div>
                    </div>
                    <!-- 환자 관리 -->
                    <div class="menu-item">
                        <span
                            onclick="toggleSubmenu('patient-submenu')"
                            class="flex items-center justify-between px-3 py-2 text-neutral-700 hover:bg-neutral-200 rounded-md cursor-pointer"
                        >
                            <div class="flex items-center space-x-3">
                                <i class="fa-solid fa-users"></i>
                                <span>환자 관리</span>
                            </div>
                            <i class="fa-solid fa-chevron-right arrow text-sm" id="patient-arrow"></i>
                        </span>
                        <div id="patient-submenu" class="submenu ml-6 mt-1 space-y-1">
                            <a
                                href="patientList.html"
                                class="flex items-center space-x-3 px-3 py-2 text-neutral-600 hover:bg-neutral-100 rounded-md text-sm cursor-pointer"
                            >
                                <i class="fa-solid fa-list"></i>
                                <span>환자 목록</span>
                            </a>
                        </div>
                    </div>
                    <!-- 진료 기록 -->
                    <div class="menu-item">
                        <span
                            onclick="toggleSubmenu('record-submenu')"
                            class="flex items-center justify-between px-3 py-2 text-neutral-700 hover:bg-neutral-200 rounded-md cursor-pointer"
                        >
                            <div class="flex items-center space-x-3">
                                <i class="fa-solid fa-file-medical"></i>
                                <span>진료 기록</span>
                            </div>
                            <i class="fa-solid fa-chevron-right arrow text-sm" id="record-arrow"></i>
                        </span>
                        <div id="record-submenu" class="submenu ml-6 mt-1 space-y-1">
                            <a
                                href="patientDgnsLst.html"
                                class="flex items-center space-x-3 px-3 py-2 text-neutral-600 hover:bg-neutral-100 rounded-md text-sm cursor-pointer"
                            >
                                <i class="fa-solid fa-file-lines"></i>
                                <span>환자별 진료 기록</span>
                            </a>
                        </div>
                    </div>
                    <!-- 통계 (현재 활성화) -->
                    <div class="menu-item">
                        <span
                            onclick="toggleSubmenu('stats-submenu')"
                            class="flex items-center justify-between px-3 py-2 bg-neutral-900 text-white rounded-md cursor-pointer"
                        >
                            <div class="flex items-center space-x-3">
                                <i class="fa-solid fa-chart-bar"></i>
                                <span>통계</span>
                            </div>
                            <i class="fa-solid fa-chevron-right arrow text-sm text-white" id="stats-arrow"></i>
                        </span>
                        <div id="stats-submenu" class="submenu ml-6 mt-1 space-y-1">
                            <a
                                href="patient-stats.html"
                                class="flex items-center space-x-3 px-3 py-2 bg-neutral-100 text-neutral-900 rounded-md text-sm cursor-pointer"
                            >
                                <i class="fa-solid fa-user-chart"></i>
                                <span>진료 통계</span>
                            </a>
                            <a
                                href="revenue-stats.html"
                                class="flex items-center space-x-3 px-3 py-2 text-neutral-600 hover:bg-neutral-100 rounded-md text-sm cursor-pointer"
                            >
                                <i class="fa-solid fa-won-sign"></i>
                                <span>결제 현황</span>
                            </a>
                            <a
                                href="disease-stats.html"
                                class="flex items-center space-x-3 px-3 py-2 text-neutral-600 hover:bg-neutral-100 rounded-md text-sm cursor-pointer"
                            >
                                <i class="fa-solid fa-chart-pie"></i>
                                <span>정산 현황</span>
                            </a>
                        </div>
                    </div>
                    <!-- 설정 -->
                    <div class="menu-item">
                        <span
                            onclick="toggleSubmenu('settings-submenu')"
                            class="flex items-center justify-between px-3 py-2 text-neutral-700 hover:bg-neutral-200 rounded-md cursor-pointer"
                        >
                            <div class="flex items-center space-x-3">
                                <i class="fa-solid fa-cog"></i>
                                <span>설정</span>
                            </div>
                            <i class="fa-solid fa-chevron-right arrow text-sm" id="settings-arrow"></i>
                        </span>
                        <div id="settings-submenu" class="submenu ml-6 mt-1 space-y-1">
                            <a
                                href="profile-settings.html"
                                class="flex items-center space-x-3 px-3 py-2 text-neutral-600 hover:bg-neutral-100 rounded-md text-sm cursor-pointer"
                            >
                                <i class="fa-solid fa-user-gear"></i>
                                <span>병원 정보 설정</span>
                            </a>
                            <a
                                href="clinic-settings.html"
                                class="flex items-center space-x-3 px-3 py-2 text-neutral-600 hover:bg-neutral-100 rounded-md text-sm cursor-pointer"
                            >
                                <i class="fa-solid fa-hospital"></i>
                                <span>병원 시간 설정</span>
                            </a>
                            <a
                                href="backup-settings.html"
                                class="flex items-center space-x-3 px-3 py-2 text-neutral-600 hover:bg-neutral-100 rounded-md text-sm cursor-pointer"
                            >
                                <i class="fa-solid fa-database"></i>
                                <span>-</span>
                            </a>
                        </div>
                    </div>
                </nav>
            </aside>
            <section class="flex-1 p-6">
                <h2 class="text-2xl text-neutral-900 mb-6">진료 통계</h2>
                <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8">
                    <!-- 비대면 진료 예약 -->
                    <div class="bg-white border border-neutral-200 rounded-lg p-5 shadow-sm relative">
                        <div class="w-12 h-12 flex items-center justify-center bg-blue-100 text-blue-600 rounded-full mb-3">
                            <i class="fa-solid fa-mobile-screen-button text-xl"></i>
                        </div>
                        <div class="text-sm text-neutral-600 mb-1">비대면 진료 예약 건수</div>
                        <div class="text-2xl font-semibold text-neutral-900" id="stat-remote">128</div>
                        <div class="text-xs text-green-500 mt-1 flex items-center">
                            <i class="fa-solid fa-arrow-up mr-1"></i> 12% 전월 대비
                        </div>
                    </div>
                
                    <!-- 진료 완료 -->
                    <div class="bg-white border border-neutral-200 rounded-lg p-5 shadow-sm relative">
                        <div class="w-12 h-12 flex items-center justify-center bg-green-100 text-green-600 rounded-full mb-3">
                            <i class="fa-solid fa-user-doctor text-xl"></i>
                        </div>
                        <div class="text-sm text-neutral-600 mb-1">진료 완료 건수</div>
                        <div class="text-2xl font-semibold text-neutral-900" id="stat-done">97</div>
                        <div class="text-xs text-red-500 mt-1 flex items-center">
                            <i class="fa-solid fa-arrow-down mr-1"></i> 5% 전월 대비
                        </div>
                    </div>
                
                    <!-- 결제 완료 -->
                    <div class="bg-white border border-neutral-200 rounded-lg p-5 shadow-sm relative">
                        <div class="w-12 h-12 flex items-center justify-center bg-yellow-100 text-yellow-600 rounded-full mb-3">
                            <i class="fa-solid fa-credit-card text-xl"></i>
                        </div>
                        <div class="text-sm text-neutral-600 mb-1">결제 완료 건수</div>
                        <div class="text-2xl font-semibold text-neutral-900" id="stat-paid">92</div>
                        <div class="text-xs text-green-500 mt-1 flex items-center">
                            <i class="fa-solid fa-arrow-up mr-1"></i> 8% 전월 대비
                        </div>
                    </div>
                
                    <!-- 처방 -->
                    <div class="bg-white border border-neutral-200 rounded-lg p-5 shadow-sm relative">
                        <div class="w-12 h-12 flex items-center justify-center bg-purple-100 text-purple-600 rounded-full mb-3">
                            <i class="fa-solid fa-pills text-xl"></i>
                        </div>
                        <div class="text-sm text-neutral-600 mb-1">처방 건수</div>
                        <div class="text-2xl font-semibold text-neutral-900" id="stat-prescribed">85</div>
                        <div class="text-xs text-green-500 mt-1 flex items-center">
                            <i class="fa-solid fa-arrow-up mr-1"></i> 10% 전월 대비
                        </div>
                    </div>
                </div>
                
                <div class="bg-white border border-neutral-200 rounded-lg p-6 shadow">
                    <h3 class="text-lg text-neutral-900 mb-4">월별 통계</h3>
                    <canvas id="statsChart" height="120"></canvas>
                </div>
            </section>
        </main>
        <script>
            function toggleSubmenu(submenuId) {
                const submenu = document.getElementById(submenuId);
                const arrow = document.getElementById(submenuId.replace("-submenu", "-arrow"));
                const isActive = submenu.classList.contains("active");
                const allSubmenus = document.querySelectorAll(".submenu");
                const allArrows = document.querySelectorAll(".arrow");
                allSubmenus.forEach((menu) => menu.classList.remove("active"));
                allArrows.forEach((arr) => arr.classList.remove("rotated"));
                if (!isActive) {
                    submenu.classList.add("active");
                    arrow.classList.add("rotated");
                }
            }
            document.addEventListener("DOMContentLoaded", function () {
                toggleSubmenu("stats-submenu");
                // 차트 렌더링
                const ctx = document.getElementById("statsChart").getContext("2d");
                new window.Chart(ctx, {
                    type: "bar",
                    data: {
                        labels: ["1월", "2월", "3월", "4월", "5월", "6월", "7월", "8월"],
                        datasets: [
                            {
                                label: "비대면 진료 예약",
                                data: [12, 18, 22, 15, 20, 25, 18, 28],
                                backgroundColor: "rgba(107, 114, 128, 0.7)",
                            },
                            {
                                label: "진료 완료",
                                data: [10, 15, 20, 13, 18, 22, 15, 24],
                                backgroundColor: "rgba(156, 163, 175, 0.7)",
                            },
                            {
                                label: "결제 완료",
                                data: [9, 14, 18, 12, 16, 20, 13, 22],
                                backgroundColor: "rgba(209, 213, 219, 0.7)",
                            },
                            {
                                label: "처방",
                                data: [8, 12, 16, 10, 14, 18, 11, 20],
                                backgroundColor: "rgba(229, 231, 235, 0.7)",
                            },
                        ],
                    },
                    options: {
                        responsive: true,
                        plugins: {
                            legend: { position: "top" },
                            title: { display: false },
                        },
                        scales: {
                            y: { beginAtZero: true },
                        },
                    },
                });
            });
        </script>
    </body>
</html>
